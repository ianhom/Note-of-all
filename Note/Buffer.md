# 缓存设计
- 在嵌入式开发中，经常会遇到消费跟不上生产的情况，这时就需要缓存来对短时突发生产出来的数据进行缓冲，带消费者慢慢消化。
- 简单的缓存模型使用队列结构即可，突发产生的事件都保存在队列中，然后应用从队列中获取事件并消费。
- 事件可以是信号量、标志，也可以是报文数据，如果是报文数据，这里就有可能存在数据搬移的问题。
- 大量的内存拷贝对嵌入式而言是影响效率的存在，需要重新设计
- 解决内存拷贝需要解决的时候多个缓存中数据交换的方式，如果缓存中保存的是数据本身，那从一个缓存到另一个缓存就需要内存的拷贝。所以基本思路是缓存中不保存数据本身，而是指向数据的指针，这样只需要交换指针就可以实现数据交换。
- 但这样同时会带来其他问题。比如，缓存A到缓存B，数据指针是交换了，这时数据对A而言就是已经消费掉了，但是B正在消费这个数据，所以不能在A消费过后就处理掉数据，需要判断B是否完成消费，及是否数据还需要继续使用来决定。
- 在这里可以使用链表来记录哪些内存块是正在使用的，哪些可以free掉，这样可以就有了机制保证数据在在消费前都能保持有效
