## 操作系统
### 调度
- 如果说把成为操作系统的代码裁剪到最小，那最后剩下的就是调度。调度是操作系统的关键。
- 操作系统的关键是特供服务，核心服务就是调度。
- 为了更好的调度，会逐渐出现相关辅助的机制，如ipc
- 调度的对象是一段串行的流程，在rtos中称之为任务，在大型系统中称之为线程
- 程序的运行有上下文环境，调度就是切换上下文。举个例子，小时候的网吧电脑里安装了各种各样单机游戏（还没啥网络游戏），电脑有限，时间有限（四元一小时）所以一个游戏总是不能一玩到底（仙剑奇侠传）这时不得不保存下机，然后下一个偷偷摸摸来玩的小伙伴上机玩其他游戏打开他之前的金庸奇侠传记录，然后继续玩。而我等攒够了钱，我再来继续独挡。
### 进程间通讯IPC
- 调度的对象是任务，而任务之间免不了有数据交换或流程同步，这时就需要ipc。
- 在RTOS中没有虚拟内存，虽然每个任务都有自己独立的栈，但是内存地址对大家而言是一致的，即所有任务所涉及到的地址空间是同一个0~4G(32为机)，在这种情况下，最简单的数据交换方式就是使用一个全局变量。
- 既然全局变量这么简单，为什么在rtos中很少见呢?其实不光rtos，在裸机程序中对全局变量的使用都是有限制的。
- 说到这里我们用裸机中的主程序和中断来类比，有一个全局变量a，主程序中修改其值为0，紧接着打印这个值；同时中断中没1ms修改这个a的值为1，我们打印的结果是永远为0吗?从打印结果会发现，结果中会出现1，因为在打印之前总有机会被中断打断，然后被修改1并打印出来。其实还有更微观的原理。
- 裸机中的主程序和中断就属于两个任务，在rtos中多个任务之间也有类似的关系，所以多任务对共享资源都要特别注意，这时就需要ipc介入。
- 在RTOS中，没有虚拟地址，所有的地址都是实际地址，所有可以直接通过指针找到具体的内存。那么任务之间的通讯，只需要通过系统管理好数据的位置信息共享，即可完成信息的交换。
- IPC的功能不仅仅是在任务之间交换“数据”，“交换”这个行为本身就是一个可以被充分利用的“事件”，称之为“同步”
- IPC中有个叫“事件”和“信号量”的机制，实现的就是“同步”的效果。
